
{#{% set newCost = "<input name=\"costName1\" class=\"form-control\" required=\"\" type=\"text\" placeholder=\"Name of Expense\"> <input name=\"costMagnitude1\" class=\"form-control\" required=\"\" type=\"text\" placeholder=\"Cost\"> <p></p>" %}#}
{#{% set counter = [1] %}#}
<script src="https://cdnjs.cloudflare.com/ajax/libs/parsley.js/2.8.0/parsley.min.js"></script>
<script>
    $(document).ready(function ()
    {
        var counter = 1;
        $('[data-toggle="tooltip"]').tooltip();
        $("#addRow").click(function ()
        {
            counter++;
            var newCost = "<input id=\"costName" + counter + "\" name=\"costName" + counter + "\" class=\"form-control\" required=\"\" type=\"text\" placeholder=\"Name of Expense\"> <input id=\"costMagnitude" + counter + "\" name=\"costMagnitude" + counter + "\" class=\"form-control\" required=\"\" type=\"text\" placeholder=\"Cost\"> <p id=para" + counter + "></p>";
{#            {% set counter = counter + 1 %}#}
{#            {% if counter.append(counter.pop() + 1) %}{% endif %}#}
            console.log("yay im workin");
            //$("#additionalCostBreakdownDiv").append($(".cost"));
            $("#additionalCostBreakdownDiv").append(newCost);
        });
        $("#deleteRow").click(function ()
        {
            console.log("yay im workin");
            if (counter > 0)
            {
                $("#costName" + counter).remove();
                $("#costMagnitude" + counter).remove();
                $("#para" + counter).remove();
                counter--;
            }
        });
    });
</script>
<div class="modal-header">
    <h5 class="modal-title">Create Trip</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
</div>
<div class="modal-body">
{#    <div class="bs-callout bs-callout-warning hidden">#}
{#    <h4>Oh snap!</h4>#}
{#    <p>This form seems to be invalid :(</p>#}
{#</div>#}
{##}
{#<div class="bs-callout bs-callout-info hidden">#}
{#    <h4>Yay!</h4>#}
{#    <p>Everything seems to be ok :)</p>#}
{#</div>#}

<form id="openForm" data-parsley-validate="" >
    <label for="tripName">Trip Name</label>
    <input name="tripName" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="Give your trip a name." data-placement="left">

    <label for="departureDate">Departure Date</label>
    <input name="departureDate" class="form-control" required="" type="date" data-toggle="tooltip" data-original-title="What date do you depart on this trip? (format is mm/dd/yyyy)" data-placement="left">

    <label for="returnDate">Return Date</label>
    <input name="returnDate" class="form-control" required="" type="date" data-toggle="tooltip" data-original-title="What date do you return from this trip? (format is mm/dd/yyyy)" data-placement="left">

    <label for="tripLocation">Trip Location</label>
    <input name="tripLocation" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="Where are you going on this trip?" data-placement="left">

    <label for="tripState">Trip State</label>
    <input name="tripState" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="In what state is your destination?" data-placement="left">

    <label for="details">Details</label>
    <textarea name="details" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="Provide a short description of what your trip is about." data-placement="left"></textarea>

    <label for="gearList">Gear List</label>
    <textarea name="gearList" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="What gear will you need for this trip?" data-placement="left"></textarea>

    <label for="meetingPlace">Trip Meeting Place</label>
    <input name="meetingPlace" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="Where do you and your fellow trip-goers want to meet up before departing?" data-placement="left">

    <label for="costName">Cost Breakdown</label>
    <div id="additionalCostBreakdownDiv" class="form-inline">
        <input id="costName1" name="costName1" class="form-control" required="" type="text" placeholder="Name of Expense">
        <input id="costMagnitude1" name="costMagnitude1" class="form-control" required="" type="text" placeholder="Cost">
        <p id="para1"></p>
    </div>
    <p></p>
    <a role="button" id="addRow" class="btn btn-sm btn-primary" data-toggle="tooltip" data-original-title="Add an additional expense you expect to incur on this trip." data-placement="left"><i class="fa fa-plus" aria-hidden="true"></i></a>
    <a role="button" id="deleteRow" class="btn btn-sm btn-warning" data-toggle="tooltip" data-original-title="Remove one expense from the table." data-placement="right"><i class="fa fa-minus fa-fw" aria-hidden="true"></i></a>
    <p></p>

    <label for="maxCars">Maximum Cars</label>
    <input name="maxCars" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="How many cars, in total, are allowed on this trip?" data-placement="left">
    <p></p>

    <div class="form-check">
        <label class="form-check-label" data-toggle="tooltip" data-original-title="Is this trip substance-free?" data-placement="right">
            <input name="substanceFree" class="form-check-input" type="checkbox">
            Substance-Free
        </label>
    </div>
    <p></p>
    <div class="form-check">
        <label class="form-check-label" data-toggle="tooltip" data-original-title="Are you, personally, a driver for this trip?" data-placement="right">
            <input name="driver" class="form-check-input" type="checkbox">
            Driver
        </label>
    </div>
    <p></p>
    <label for="carCapacity">Car Capacity</label>
    <input name="carCapacity" class="form-control" required="" type="text" data-toggle="tooltip" data-original-title="How many people, including yourself, can your car hold?" data-placement="left">


    <br>
    <input class="btn btn-default" type="submit" value="Create Trip">

</form>
</div>
<script type="text/javascript">
    $(function () {
      $('#openForm').parsley().on('field:validated', function()
      {
          var ok = $('.parsley-error').length === 0;
          $('.bs-callout-info').toggleClass('hidden', !ok);
          $('.bs-callout-warning').toggleClass('hidden', ok);
      })
      .on('form:submit', function()
      {
{#          $.ajax({#}
{#              type: "POST",#}
{#              url: "/api/addTrip",#}
{#              data: $('#demo-form').serialize(),#}
{#              success: function()#}
{#              {#}
{#                  console.log("Success!");#}
{#              }#}
{#          });#}
		    $.post("api/addTrip", $("#openForm").serialize());
          console.log($('#openForm').serialize());
          console.log("it worked!!!! the demo was a lie");
          $(location).reload();
          //$(location).attr('href', "{{ url_for('main.mainPage') }}" );
          return false; // Don't submit form for this demo
      });
    });
</script>
